{
  "Resources": {
    "VPNLogGroupE95BED3C": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "RetentionInDays": 30
      },
      "UpdateReplacePolicy": "Retain",
      "DeletionPolicy": "Retain",
      "Metadata": {
        "aws:cdk:path": "ClientVPNStack/VPNLogGroup/Resource"
      }
    },
    "VPNLogGroupVPNLogStream669BBA0D": {
      "Type": "AWS::Logs::LogStream",
      "Properties": {
        "LogGroupName": {
          "Ref": "VPNLogGroupE95BED3C"
        }
      },
      "UpdateReplacePolicy": "Retain",
      "DeletionPolicy": "Retain",
      "Metadata": {
        "aws:cdk:path": "ClientVPNStack/VPNLogGroup/VPNLogStream/Resource"
      }
    },
    "VPNEndpoint": {
      "Type": "AWS::EC2::ClientVpnEndpoint",
      "Properties": {
        "AuthenticationOptions": [
          {
            "MutualAuthentication": {
              "ClientRootCertificateChainArn": "arn:aws:acm:ap-southeast-2:505070718513:certificate/6b85eefd-56b3-4461-8dda-19613170ba2d"
            },
            "Type": "certificate-authentication"
          }
        ],
        "ClientCidrBlock": "10.2.0.0/22",
        "ConnectionLogOptions": {
          "CloudwatchLogGroup": {
            "Ref": "VPNLogGroupE95BED3C"
          },
          "CloudwatchLogStream": {
            "Ref": "VPNLogGroupVPNLogStream669BBA0D"
          },
          "Enabled": true
        },
        "ServerCertificateArn": "arn:aws:acm:ap-southeast-2:505070718513:certificate/9b30b41a-89a1-416b-b2d2-bc76c26e9f15",
        "Description": "EKS Client VPN",
        "SplitTunnel": true
      },
      "Metadata": {
        "aws:cdk:path": "ClientVPNStack/VPNEndpoint"
      }
    },
    "ClientVpnAuthRule": {
      "Type": "AWS::EC2::ClientVpnAuthorizationRule",
      "Properties": {
        "ClientVpnEndpointId": {
          "Ref": "VPNEndpoint"
        },
        "TargetNetworkCidr": "10.0.0.0/22",
        "AuthorizeAllGroups": true,
        "Description": "Authorize the Client VPN access to our VPC CIDR"
      },
      "Metadata": {
        "aws:cdk:path": "ClientVPNStack/ClientVpnAuthRule"
      }
    },
    "CDKMetadata": {
      "Type": "AWS::CDK::Metadata",
      "Properties": {
        "Analytics": "v2:deflate64:H4sIAAAAAAAAA0WNzQ6CMBCEn4V7KSox0ZuGGC8eDCTem1JwBXZJf2K06btLxeBpZr7dzKz5Puer5CCeJpV1l3lJWnFfWSE7VipDTkvFCkJjtZOWFQ3+aYPToQYLhIHFBt9Ta7i/UHvW5Mb4sfjJVFYrMfzoHAJTcsN9rOpBob2NeMJ6JMDv1gKPzt5Jw1vEsdL1KoTArq8JYpbzHd8mDwOQaocWBsXLWT+c3+EP3gAAAA=="
      },
      "Metadata": {
        "aws:cdk:path": "ClientVPNStack/CDKMetadata/Default"
      },
      "Condition": "CDKMetadataAvailable"
    }
  },
  "Conditions": {
    "CDKMetadataAvailable": {
      "Fn::Or": [
        {
          "Fn::Or": [
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "ap-east-1"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "ap-northeast-1"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "ap-northeast-2"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "ap-south-1"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "ap-southeast-1"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "ap-southeast-2"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "ca-central-1"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "cn-north-1"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "cn-northwest-1"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "eu-central-1"
              ]
            }
          ]
        },
        {
          "Fn::Or": [
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "eu-north-1"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "eu-west-1"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "eu-west-2"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "eu-west-3"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "me-south-1"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "sa-east-1"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "us-east-1"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "us-east-2"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "us-west-1"
              ]
            },
            {
              "Fn::Equals": [
                {
                  "Ref": "AWS::Region"
                },
                "us-west-2"
              ]
            }
          ]
        }
      ]
    }
  }
}